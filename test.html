<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Menu Re-architectured</title>
    <meta name="robots" content="noindex, nofollow">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* =========================================
           1. 基礎設定 (Base)
           ========================================= */
        :root {
            --c-primary: #1A202C;       
            --c-accent: #C5A065;        
            --c-bg-body: #F9F9F7;       
            --c-text-gray: #555555; 
            --theme-dark-bg: #1A202C;
            --nav-height: 70px;
        }

        *, *::before, *::after { box-sizing: border-box; }
        body { margin: 0; font-family: 'Noto Sans TC', sans-serif; background-color: var(--c-bg-body); line-height: 1.6; padding-top: var(--nav-height); }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; padding: 0; margin: 0; }

        /* =========================================
           2. 導覽列結構 (Navbar Structure)
           ========================================= */
        .navbar {
            background: rgba(26, 32, 44, 0.95); 
            backdrop-filter: blur(10px); 
            height: var(--nav-height); 
            width: 100%; 
            position: fixed; 
            top: 0; 
            left: 0; 
            z-index: 9999; 
            border-bottom: 1px solid rgba(197, 160, 101, 0.3);
        }
        .nav-container {
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            height: 100%; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 0 20px;
        }
        .nav-logo { color: var(--c-accent); font-weight: 700; font-size: 1.5rem; letter-spacing: 1px; font-family: 'Noto Serif TC', serif; }

        /* =========================================
           3. 電腦版選單樣式 (Desktop Styles)
           @media (min-width: 961px)
           ========================================= */
        @media (min-width: 961px) {
            .menu-toggle { display: none; } /* 隱藏漢堡 */

            .nav-menu { display: flex; align-items: center; gap: 20px; }
            
            .nav-item { position: relative; } /* 作為下拉選單的定位點 */

            .nav-link { 
                color: #fff; font-size: 0.95rem; font-weight: 500; padding: 10px 5px; 
                display: flex; align-items: center; gap: 6px; position: relative;
            }
            .nav-link:hover, .nav-link.active { color: var(--c-accent); }
            .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0; background-color: var(--c-accent); transition: 0.3s; }
            .nav-link:hover::after { width: 100%; }
            
            /* 查詢按鈕特殊樣式 */
            .nav-link.nav-btn-booking { border: 1px solid var(--c-accent); padding: 8px 20px; border-radius: 50px; background: var(--c-accent); }
            .nav-link.nav-btn-booking::after { display: none; }
            .nav-link.nav-btn-booking:hover { background: #A68550; color: #fff; }

            /* 電腦版下拉選單 (浮動) */
            .dropdown-menu {
                position: absolute; 
                top: 100%; left: 50%; 
                transform: translateX(-50%) translateY(10px);
                background: #fff; 
                min-width: 200px; 
                padding: 10px 0; 
                border-radius: 8px; 
                box-shadow: 0 10px 30px rgba(0,0,0,0.15);
                border-top: 3px solid var(--c-accent);
                opacity: 0; visibility: hidden; 
                transition: all 0.3s ease;
            }
            /* Hover 觸發 */
            .nav-item:hover .dropdown-menu { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }
            
            .dropdown-link { display: block; padding: 10px 20px; color: var(--c-primary); font-size: 0.9rem; }
            .dropdown-link:hover { background: var(--c-bg-body); color: var(--c-accent); padding-left: 25px; }
            
            .arrow-icon { font-size: 12px; transition: 0.3s; }
            .nav-item:hover .arrow-icon { transform: rotate(180deg); }
        }

        /* =========================================
           4. 手機版選單樣式 (Mobile Styles)
           @media (max-width: 960px)
           ========================================= */
        @media (max-width: 960px) {
            /* 漢堡按鈕 */
            .menu-toggle { display: block; cursor: pointer; width: 30px; height: 25px; position: relative; }
            .bar { display: block; width: 100%; height: 3px; background-color: var(--c-accent); margin: 5px 0; transition: 0.3s; }
            
            /* 漢堡變叉叉動畫 (Optional) */
            .menu-toggle.is-active .bar:nth-child(1) { transform: translateY(8px) rotate(45deg); }
            .menu-toggle.is-active .bar:nth-child(2) { opacity: 0; }
            .menu-toggle.is-active .bar:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }

            /* 主選單容器：滑出或滿版 */
            .nav-menu {
                position: fixed;
                top: var(--nav-height);
                left: 0;
                width: 100%;
                height: calc(100vh - var(--nav-height)); /* 填滿剩餘高度 */
                background-color: #1A202C; /* 深色背景 */
                flex-direction: column;
                align-items: stretch; /* 寬度拉滿 */
                overflow-y: auto; /* 內容過長可捲動 */
                transition: transform 0.3s ease-in-out;
                transform: translateX(-100%); /* 預設藏在左邊 */
                display: flex;
                padding-bottom: 50px; /* 底部留白 */
            }
            
            /* 選單開啟狀態 */
            .nav-menu.active { transform: translateX(0); }

            /* 選單項目 */
            .nav-item { width: 100%; border-bottom: 1px solid rgba(255,255,255,0.05); }
            
            /* 主連結樣式 */
            .nav-link {
                display: flex;
                justify-content: space-between; /* 文字靠左，箭頭靠右 */
                align-items: center;
                padding: 20px 25px;
                color: #fff;
                font-size: 1.1rem;
                font-weight: 500;
                width: 100%;
            }
            
            .nav-link:hover { background-color: rgba(255,255,255,0.05); }
            
            /* 箭頭轉向 */
            .arrow-icon { transition: 0.3s; }
            .nav-item.open .arrow-icon { transform: rotate(180deg); }

            /* 手機版下拉選單 (Accordion 模式) */
            .dropdown-menu {
                display: none; /* 預設隱藏 (不佔位) */
                background-color: #11151C; /* 比背景更深，凸顯層級 */
                width: 100%;
                position: static; /* 關鍵：不再浮動，而是佔據空間 */
                box-shadow: inset 0 5px 15px rgba(0,0,0,0.5); /* 內陰影 */
                padding: 10px 0;
                border-top: 1px solid rgba(255,255,255,0.1);
                opacity: 1; visibility: visible; /* 重置電腦版隱藏設定 */
            }
            
            /* 展開狀態 */
            .nav-item.open .dropdown-menu { display: block; animation: slideDown 0.3s ease; }
            @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

            /* 子連結樣式 */
            .dropdown-link {
                display: block;
                padding: 15px 25px 15px 50px; /* 左側縮排 50px */
                color: #ccc; /* 淺灰字 */
                font-size: 1rem;
                border-bottom: 1px solid rgba(255,255,255,0.03);
            }
            .dropdown-link:hover { color: #fff; background-color: rgba(255,255,255,0.05); }
            
            /* 按鈕修正 */
            .nav-link.nav-btn-booking { 
                justify-content: center; background: var(--c-accent); border: none; 
                margin: 20px auto; width: 80%; text-align: center;
            }
        }
        
        /* =========================================
           5. 測試內容與頁尾
           ========================================= */
        .test-content { height: 60vh; display: flex; justify-content: center; align-items: center; text-align: center; padding: 20px; }
        
        .footer { background-color: var(--theme-dark-bg); color: #aaa; padding: 80px 0 40px; border-top: 3px solid var(--c-accent); }
        .footer-grid { max-width: 1100px; margin: 0 auto; padding: 0 20px; display: grid; grid-template-columns: 1.5fr 1fr 1fr; gap: 50px; }
        .footer h3 { color: white; margin-bottom: 20px; font-family: 'Noto Serif TC', serif; }
        .footer p { margin-bottom: 10px; }
        .copyright { text-align: center; margin-top: 50px; border-top: 1px solid #333; padding-top: 30px; font-size: 0.85rem; }
        
        @media (max-width: 768px) {
            .footer-grid { grid-template-columns: 1fr; gap: 40px; }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">你好哇寓所</a>
            <div class="menu-toggle" id="mobile-menu">
                <span class="bar"></span><span class="bar"></span><span class="bar"></span>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item"><a href="index.html" class="nav-link"><i class="fa-solid fa-house"></i> 首頁</a></li>
                <li class="nav-item"><a href="rooms.html" class="nav-link"><i class="fa-solid fa-bed"></i> 房型介紹</a></li>
                
                <li class="nav-item dropdown">
                    <a href="javascript:void(0)" class="nav-link dropdown-toggle">
                        <span><i class="fa-solid fa-file-signature"></i> 入住契約</span>
                        <i class="fa-solid fa-angle-down arrow-icon"></i>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="agreement.html" class="dropdown-link"><i class="fa-solid fa-pen-nib"></i> 線上簽約</a></li>
                        <li><a href="agreement.html" class="dropdown-link"><i class="fa-regular fa-file-pdf"></i> 條款預覽</a></li>
                    </ul>
                </li>

                <li class="nav-item"><a href="traffic.html" class="nav-link"><i class="fa-solid fa-car"></i> 交通停車</a></li>
                
                <li class="nav-item dropdown">
                    <a href="javascript:void(0)" class="nav-link dropdown-toggle">
                        <span><i class="fa-solid fa-map-location-dot"></i> 旅遊行程</span>
                        <i class="fa-solid fa-angle-down arrow-icon"></i>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="travel.html" class="dropdown-link"><i class="fa-solid fa-location-arrow"></i> 周邊景點</a></li>
                        <li><a href="food.html" class="dropdown-link"><i class="fa-solid fa-utensils"></i> 美食地圖</a></li>
                    </ul>
                </li>
                
                <li class="nav-item dropdown">
                    <a href="javascript:void(0)" class="nav-link dropdown-toggle" style="color:var(--c-accent);">
                        <span><i class="fa-solid fa-bullhorn"></i> 住宿情報</span>
                        <i class="fa-solid fa-angle-down arrow-icon"></i>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="packages-business.html" class="dropdown-link">企業包棟</a></li>
                        <li><a href="packages-wedding.html" class="dropdown-link">迎娶包棟</a></li>
                        <li><a href="packages-family.html" class="dropdown-link">家族包棟</a></li>
                        <li><a href="packages-team.html" class="dropdown-link">球隊比賽</a></li>
                    </ul>
                </li>

                <li class="nav-item">
                    <a href="check.html" class="nav-link nav-btn-booking"><i class="fa-solid fa-calendar-check"></i> 查詢空房</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="test-content">
        <div>
            <h2>手機版選單重構測試</h2>
            <p>請切換至手機模式 (小於 960px) 測試。</p>
            <p>點擊「入住契約」或「旅遊行程」，確認子選單是否向下展開且文字清晰。</p>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <h3>關於 你好哇寓所</h3>
                    <p style="color:#ccc;">專注於提供優質包棟體驗的高雄合法民宿。</p>
                </div>
                <div>
                    <h3>聯絡資訊</h3>
                    <p>高雄市鹽埕區大公路70巷8號</p>
                    <p>0932-828-922</p>
                </div>
                <div>
                    <h3>Follow Us</h3>
                    <p>LINE / Facebook / Instagram</p>
                </div>
            </div>
            <div class="copyright">© 2025 Hello House.</div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mobileMenuBtn = document.getElementById('mobile-menu');
            const navMenu = document.querySelector('.nav-menu');
            const dropdownItems = document.querySelectorAll('.nav-item.dropdown');

            // 1. 漢堡選單切換
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenuBtn.classList.toggle('is-active');
                navMenu.classList.toggle('active');
            });

            // 2. 手機版手風琴邏輯 (Accordion Logic)
            dropdownItems.forEach(item => {
                const link = item.querySelector('.dropdown-toggle');
                
                link.addEventListener('click', (e) => {
                    // 僅在手機版觸發
                    if (window.innerWidth <= 960) {
                        e.preventDefault(); // 阻止連結跳轉
                        
                        // 檢查自己是否已經開了
                        const isOpen = item.classList.contains('open');

                        // 先關閉「所有」其他的選單 (互斥效果)
                        dropdownItems.forEach(d => d.classList.remove('open'));

                        // 如果自己原本沒開，就打開
                        if (!isOpen) {
                            item.classList.add('open');
                        }
                    }
                });
            });

            // 3. 點擊外部關閉選單
            document.addEventListener('click', (e) => {
                if (!navMenu.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
                    navMenu.classList.remove('active');
                    mobileMenuBtn.classList.remove('is-active');
                }
            });
        });
    </script>
</body>
</html>