<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å³æ™‚æˆ¿æ³æŸ¥è©¢ | ä½ å¥½å“‡å¯“æ‰€ & æºé ‚æ°‘å®¿</title>
    <meta name="robots" content="index, follow">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/airbnb.css">

    <style>
        /* =========================================
           Design System
           ========================================= */
        :root {
            --c-primary: #1A202C;       
            --c-accent: #C5A065;        
            --c-accent-hover: #A68550;
            --c-bg-body: #F9F9F7;       
            --c-bg-white: #FFFFFF;
            --c-bg-light: #EDF2F7;
            --c-text-gray: #555555; 
            --c-line: #06C755;
            --c-error: #e53e3e; 
            --c-success: #38a169;
            --theme-dark-bg: #1A202C;

            --font-serif: 'Noto Serif TC', serif; 
            --font-sans: 'Noto Sans TC', sans-serif; 

            --shadow-card: 0 10px 40px -10px rgba(0, 0, 0, 0.08);
            --radius-md: 12px;
            --radius-full: 9999px;
        }

        *, *::before, *::after { box-sizing: border-box; }
        body { margin: 0; font-family: var(--font-sans); background-color: var(--c-bg-body); color: var(--c-primary); line-height: 1.6; display: flex; flex-direction: column; min-height: 100vh; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; padding: 0; margin: 0; }
        img { max-width: 100%; display: block; }

        /* =========================================
           Navbar (æ¨™æº–ç‰ˆ)
           ========================================= */
        .navbar { background: rgba(26, 32, 44, 0.95); backdrop-filter: blur(10px); height: 70px; width: 100%; position: fixed; top: 0; left: 0; z-index: 9999; border-bottom: 1px solid rgba(197, 160, 101, 0.3); box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .nav-container { display: flex; justify-content: space-between; align-items: center; height: 100%; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .nav-logo { color: var(--c-accent); font-family: var(--font-serif); font-size: 1.5rem; font-weight: 700; letter-spacing: 1px; }
        .nav-menu { display: flex; align-items: center; gap: 20px; margin: 0; padding: 0; list-style: none; }
        .nav-link { color: #fff; font-size: 0.95rem; font-weight: 500; padding: 10px 5px; position: relative; display: flex; align-items: center; gap: 6px; transition: 0.3s; }
        .nav-link:hover, .nav-link.active { color: var(--c-accent); }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: 5px; left: 0; background-color: var(--c-accent); transition: width 0.3s; }
        .nav-link:hover::after { width: 100%; }
        
        .nav-link.nav-btn-booking::after { display: none; }
        .nav-btn-booking { background-color: var(--c-accent); color: white !important; padding: 8px 20px; border-radius: 50px; font-weight: bold; border: 1px solid var(--c-accent); }
        .nav-btn-booking:hover { background-color: var(--c-accent-hover); transform: translateY(-2px); }

        /* Dropdown (Desktop) */
        .dropdown { position: relative; }
        .dropdown-menu { position: absolute; top: 100%; left: 50%; transform: translateX(-50%) translateY(10px); background: #fff; width: 200px; list-style: none; padding: 10px 0; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); opacity: 0; visibility: hidden; transition: all 0.3s ease; border-top: 3px solid var(--c-accent); margin: 0; }
        .dropdown:hover .dropdown-menu { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }
        .dropdown-link { display: flex; align-items: center; gap: 10px; padding: 12px 20px; color: var(--c-primary); font-size: 0.9rem; transition: 0.2s; }
        .dropdown-link i { color: var(--c-accent); width: 20px; text-align: center; }
        .dropdown-link:hover { background-color: var(--c-bg-light); color: var(--c-accent); padding-left: 25px; }
        
        .menu-toggle { display: none; cursor: pointer; }
        .bar { display: block; width: 25px; height: 3px; margin: 5px auto; background-color: var(--c-accent); transition: 0.3s; }
        .arrow-icon { font-size: 12px; margin-left: 2px; transition: 0.3s; }
        .nav-item:hover .arrow-icon { transform: rotate(180deg); }

        /* Hero */
        .hero { position: relative; height: 40vh; min-height: 350px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white; background-color: var(--c-primary); margin-top: 70px; }
        .hero-bg { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background-image: url('images/cover.jpg'); 
            background-size: cover; background-position: center; opacity: 0.5; z-index: 1; 
        }
        .hero-content { position: relative; z-index: 2; }
        .hero h1 { font-family: var(--font-serif); font-size: 2.5rem; margin-bottom: 0.5rem; font-weight: 700; }

        /* Main Container */
        .container { width: 90%; max-width: 1000px; margin: 0 auto; flex: 1;}
        
        /* Inquiry Box */
        .inquiry-box { background: #fff; border-radius: var(--radius-md); padding: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); margin: -60px auto 0; position: relative; z-index: 10; border: 1px solid #eee; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr 1.5fr auto; gap: 15px; margin-top: 20px; align-items: end; }
        .form-group label { display: block; font-size: 0.85rem; color: var(--c-text-gray); margin-bottom: 5px; font-weight: bold; }
        .form-control { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; background: #F8F9FA; transition: 0.3s; }
        .form-control:focus { outline: none; border-color: var(--c-accent); background: #fff; }
        
        /* Buttons */
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 30px; border-radius: 50px; font-weight: 500; cursor: pointer; border: none; font-size: 1rem; width: 100%; transition: 0.3s; }
        .btn-line { background-color: var(--c-line); color: white; box-shadow: 0 4px 15px rgba(6, 199, 85, 0.3); }
        .btn-line:hover { background-color: #05b64d; transform: translateY(-2px); }

        /* Steps Sections */
        .step-section { margin-top: 30px; border-top: 2px dashed #eee; padding-top: 30px; display: none; animation: fadeIn 0.5s ease; text-align: left; }
        .step-section.active { display: block; }
        .step-title { font-size: 1.2rem; font-weight: bold; margin-bottom: 20px; color: var(--c-primary); border-left: 4px solid var(--c-accent); padding-left: 10px; }

        /* Plan Cards */
        .plan-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }
        .plan-card { border: 2px solid #eee; border-radius: 10px; padding: 20px; cursor: pointer; transition: 0.2s; position: relative; background: #fff; }
        .plan-card:hover { border-color: #ddd; background: #fcfcfc; transform: translateY(-2px); }
        .plan-card.selected { border-color: var(--c-accent); background-color: #FFFbf0; box-shadow: 0 4px 12px rgba(197, 160, 101, 0.15); }
        .plan-card h4 { margin: 0 0 5px 0; font-size: 1.1rem; color: var(--c-primary); }
        .plan-price { font-size: 1rem; color: var(--c-accent); font-weight: bold; margin-bottom: 8px; font-family: var(--font-sans); }
        .plan-desc { font-size: 0.85rem; color: #666; margin: 0; line-height: 1.5; border-top: 1px solid #eee; padding-top: 8px; margin-top: 8px; }
        .plan-capacity { position: absolute; top: 15px; right: 15px; background: #eee; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; color: #555; }
        .plan-card.selected .plan-capacity { background: var(--c-accent); color: white; }
        .select-hint { text-align: center; color: var(--c-accent); font-size: 0.8rem; margin-top: 10px; font-weight: bold; opacity: 0; transition: 0.3s; }
        .plan-card:hover .select-hint { opacity: 1; }
        .plan-card.selected .select-hint { opacity: 1; content: 'å·²é¸æ“‡'; }

        /* Contact Form */
        .contact-form { max-width: 600px; margin: 0 auto; background: #f9f9f9; padding: 30px; border-radius: 12px; border: 1px solid #eee; box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
        .input-error { border-color: #e53e3e !important; background-color: #fff5f5 !important; }
        .error-msg { color: #e53e3e; font-size: 0.8rem; display: none; margin-top: 5px; }

        /* Status Messages */
        .status-message { margin-top: 30px; padding: 25px; border-radius: 12px; font-size: 1rem; display: none; text-align: left; animation: fadeIn 0.5s ease; }
        .status-success { background-color: #F0FFF4; border: 1px solid #9AE6B4; }
        .status-error { background-color: #FFF5F5; border: 1px solid #FEB2B2; }
        .status-loading { background-color: #EBF8FF; border: 1px solid #90CDF4; color: #2B6CB0; text-align: center; }

        /* Recommendation List */
        .recommendation-area { margin-top: 15px; border-top: 1px solid #f0f0f0; padding-top: 15px; }
        .rec-title { color: #d9534f; font-weight: bold; margin-bottom: 10px; font-size: 0.95rem; display: flex; align-items: center; gap: 8px; }
        .suggestion-list { list-style: none; padding: 0; margin: 0; }
        .suggestion-item { 
            display: flex; justify-content: space-between; align-items: center; 
            background: #fff; border: 1px solid #e2e2e2; padding: 12px 15px; 
            margin-bottom: 8px; border-radius: 8px; cursor: pointer; transition: 0.2s; 
        }
        .suggestion-item:hover { border-color: var(--c-accent); background-color: #fffbf0; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .sugg-tag { font-size: 0.75rem; padding: 3px 8px; border-radius: 4px; margin-right: 10px; display: inline-block; min-width: 90px; text-align: center; }
        .tag-hot { background: #ffeeba; color: #856404; border: 1px solid #ffeeba; } 
        .tag-week { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; } 
        .tag-part { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .sugg-date { font-weight: bold; color: #333; }
        .sugg-action { color: var(--c-accent); font-size: 0.9rem; display: flex; align-items: center; gap: 5px; }

        /* Calendar Area */
        .calendar-toggle-btn { display: block; margin: 40px auto 20px; background: transparent; border: 1px solid #ddd; padding: 10px 20px; border-radius: 50px; cursor: pointer; color: #666; font-size: 0.9rem; transition: 0.3s; }
        .calendar-toggle-btn:hover { border-color: var(--c-accent); color: var(--c-accent); }
        .calendars-area { display: none; grid-template-columns: 1fr; gap: 30px; transition: all 0.5s ease; }
        .calendars-area.show { display: grid; animation: fadeIn 0.5s ease; }
        .calendars-area.dual-view { grid-template-columns: 1fr 1fr; }
        .calendar-card { background: #fff; padding: 20px; border-radius: var(--radius-md); box-shadow: var(--shadow-card); border-top: 4px solid var(--c-accent); }
        .calendar-container { position: relative; padding-bottom: 75%; height: 0; overflow: hidden; border-radius: 8px; background: #f9f9f9; }
        .calendar-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        .hidden { display: none !important; }

        /* Footer & Sticky */
        .footer { background-color: #1A202C; color: #aaa; padding: 80px 0 40px; border-top: 3px solid var(--c-accent); width: 100%; margin-top: auto; text-align: left; }
        .footer-grid { display: grid; grid-template-columns: 1.5fr 1fr 1fr; gap: 50px; max-width: 1100px; margin: 0 auto; padding: 0 20px; }
        .footer h3 { color: white; font-size: 1.1rem; margin-bottom: 25px; font-family: var(--font-serif); letter-spacing: 1px; }
        .footer-desc { line-height: 1.8; margin-bottom: 20px; text-align: left; color: #CBD5E0; }
        .footer-desc p { margin-bottom: 15px; }
        .contact-row { margin-bottom: 15px; display: flex; align-items: flex-start; gap: 12px; }
        .contact-row i { color: var(--c-accent); margin-top: 5px; width: 25px; text-align: center; flex-shrink: 0; }
        .seo-tags span { display: inline-block; font-size: 12px; border: 1px solid #333; padding: 4px 10px; border-radius: 4px; margin: 0 5px 8px 0; cursor: default; }
        .copyright { text-align: center; padding-top: 30px; border-top: 1px solid #222; font-size: 0.85rem; }
        .sticky-btn { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background-color: var(--c-line); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 30px; box-shadow: 0 5px 20px rgba(6,199,85,0.4); z-index: 999; transition: 0.3s; }
        .sticky-btn:hover { transform: scale(1.1); background-color: #05b64d; }

        /* Button */
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 32px; border-radius: var(--radius-full); font-weight: 500; cursor: pointer; border: none; font-size: 1rem; width: 100%; transition: 0.3s; }
        .btn-line { background-color: var(--c-line); color: white; box-shadow: 0 4px 15px rgba(6, 199, 85, 0.3); }
        .btn-line:hover { background-color: #05b64d; transform: translateY(-2px); }

        /* RWD */
        @media (max-width: 960px) {
            .calendars-area.dual-view { grid-template-columns: 1fr; } 
            .form-grid { grid-template-columns: 1fr; }
            .inquiry-box { margin-top: -40px; padding: 30px 20px; width: 95%; }
            
            .menu-toggle { display: block; }
            .nav-menu { position: fixed; left: -100%; top: 70px; flex-direction: column; background-color: #1A202C; width: 100%; height: calc(100vh - 70px); text-align: center; transition: 0.3s; padding-top: 20px; overflow-y: auto; gap: 0; }
            .nav-menu.active { left: 0; }
            
            .nav-item { width: 100%; border-bottom: 1px solid rgba(255,255,255,0.05); }
            .nav-link { padding: 20px; justify-content: center; font-size: 1.1rem; }
            .nav-link::after { display: none; }
            
            /* [ä¿®æ­£] æ‰‹æ©Ÿç‰ˆä¸‹æ‹‰é¸å–®æ¨£å¼ - è§£æ±ºå­—çœ‹ä¸è¦‹èˆ‡è·‘ç‰ˆå•é¡Œ */
            .dropdown-menu { 
                position: static; 
                opacity: 1; 
                visibility: visible; 
                transform: none; 
                width: 100%; 
                background-color: rgba(0,0,0,0.3); /* æ·±è‰²èƒŒæ™¯åŠ æ·± */
                box-shadow: none; 
                border-top: none; 
                display: none; 
                padding: 0; /* ç§»é™¤ padding */
            }
            .dropdown.active .dropdown-menu { display: block; }
            
            /* [ä¿®æ­£] ä¸‹æ‹‰é€£çµæ¨£å¼ */
            .dropdown-link { 
                color: #ddd; /* æ”¹ç‚ºæ·ºè‰²å­—ï¼Œé¿å…åœ¨æ·±è‰²èƒŒæ™¯çœ‹ä¸è¦‹ */
                padding: 15px; 
                justify-content: center; /* ç½®ä¸­å°é½Š */
                white-space: normal; 
            }
            .dropdown-link:hover { 
                background-color: transparent; 
                color: #fff; 
            }
        }
        @media (max-width: 768px) {
            .footer-grid { grid-template-columns: 1fr; gap: 40px; }
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">ä½ å¥½å“‡å¯“æ‰€</a>
            <div class="menu-toggle" id="mobile-menu">
                <span class="bar"></span><span class="bar"></span><span class="bar"></span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="index.html" class="nav-link"><i class="fa-solid fa-house"></i> é¦–é </a></li>
                <li class="nav-item"><a href="rooms.html" class="nav-link"><i class="fa-solid fa-bed"></i> æˆ¿å‹ä»‹ç´¹</a></li>
                <li class="nav-item dropdown">
                    <a href="agreement.html" class="nav-link dropdown-toggle"><i class="fa-solid fa-file-signature"></i> å…¥ä½å¥‘ç´„ <i class="fa-solid fa-angle-down arrow-icon"></i></a>
                    <ul class="dropdown-menu">
                        <li><a href="agreement.html" class="dropdown-link"><i class="fa-solid fa-pen-nib"></i> ç·šä¸Šç°½ç´„</a></li>
                    </ul>
                </li>
                <li class="nav-item"><a href="traffic.html" class="nav-link"><i class="fa-solid fa-car"></i> äº¤é€šåœè»Š</a></li>
                <li class="nav-item dropdown">
                    <a href="travel.html" class="nav-link dropdown-toggle"><i class="fa-solid fa-map-location-dot"></i> æ—…éŠè¡Œç¨‹ <i class="fa-solid fa-angle-down arrow-icon"></i></a>
                    <ul class="dropdown-menu">
                        <li><a href="travel.html" class="dropdown-link"><i class="fa-solid fa-location-arrow"></i> å‘¨é‚Šæ™¯é»æ¨è–¦</a></li>
                        <li><a href="travel.html" class="dropdown-link"><i class="fa-solid fa-utensils"></i> é¹½åŸ•ç¾é£Ÿåœ°åœ–</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a href="packages.html" class="nav-link dropdown-toggle" style="color:var(--c-accent);"><i class="fa-solid fa-bullhorn"></i> ä½å®¿æƒ…å ± <i class="fa-solid fa-angle-down arrow-icon"></i></a>
                    <ul class="dropdown-menu">
                        <li><a href="packages-business.html" class="dropdown-link"><i class="fa-solid fa-building"></i> ä¼æ¥­åŒ…æ£Ÿæ–¹æ¡ˆ</a></li>
                        <li><a href="packages-wedding.html" class="dropdown-link"><i class="fa-solid fa-heart"></i> è¿å¨¶åŒ…æ£Ÿæ–¹æ¡ˆ</a></li>
                        <li><a href="packages-family.html" class="dropdown-link"><i class="fa-solid fa-users"></i> å®¶æ—åŒ…æ£Ÿæ–¹æ¡ˆ</a></li>
                        <li><a href="packages-team.html" class="dropdown-link"><i class="fa-solid fa-basketball"></i> çƒéšŠæ¯”è³½æ–¹æ¡ˆ</a></li>
                    </ul>
                </li>
                <li class="nav-item"><a href="check.html" class="nav-link nav-btn-booking"><i class="fa-solid fa-calendar-check"></i> æŸ¥è©¢ç©ºæˆ¿</a></li>
            </ul>
        </div>
    </nav>

    <a href="https://lin.ee/atCiMQw" target="_blank" class="sticky-btn" aria-label="Line è¨‚æˆ¿"><i class="fa-brands fa-line"></i></a>

    <header class="hero">
        <div class="hero-bg"></div>
        <div class="hero-content fade-in">
            <h1>æ™ºæ…§æˆ¿æ³æŸ¥è©¢</h1>
            <p>å³æ™‚ç³»çµ±é€£ç·šãƒ»ä½ å¥½å“‡å¯“æ‰€ & æºé ‚æ°‘å®¿</p>
        </div>
    </header>

    <div class="container">
        <div class="inquiry-box fade-in">
            
            <div id="step-1-query">
                <h2 style="font-size:1.4rem; margin-bottom:20px; color:var(--c-primary); display:flex; align-items:center; gap:10px;">
                    <i class="fa-solid fa-calendar-days" style="color:var(--c-accent)"></i> 1. æŸ¥è©¢æª”æœŸ
                </h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label>1. é è¨ˆäººæ•¸</label>
                        <select id="guest-range" class="form-control" onchange="updateVenueOptions()">
                            <option value="small">6-12 äºº (å°åŒ…æ£Ÿ)</option>
                            <option value="medium">13-26 äºº (ä¸­åŒ…æ£Ÿ)</option>
                            <option value="large">27-38 äºº (å¤§åœ˜é«”)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>2. å…¥ä½ - é€€æˆ¿æ—¥æœŸ</label>
                        <input type="text" id="date-range" class="form-control" placeholder="é¸æ“‡æ—¥æœŸ">
                    </div>
                    <div class="form-group">
                        <label>3. æ°‘å®¿æ–¹æ¡ˆ</label>
                        <select id="venue-select" class="form-control" onchange="handleVenueChange()">
                            </select>
                    </div>
                    <button class="btn btn-line" onclick="startQuery()">
                        <i class="fa-solid fa-magnifying-glass"></i> æŸ¥è©¢
                    </button>
                </div>
                <div id="status-box" class="status-message"></div>
            </div>

            <div id="step-2-plan" class="step-section">
                <div class="step-title">2. è«‹é¸æ“‡æ‚¨çš„åŒ…æ£Ÿæˆ¿å‹é…ç½® (é»æ“Šé¸æ“‡)</div>
                <div id="plan-container" class="plan-options">
                    </div>
            </div>

            <div id="step-3-contact" class="step-section">
                <div class="step-title">3. å¡«å¯«è¯çµ¡è³‡æ–™ï¼Œå³åˆ»å–å¾—å„ªæƒ ï¼</div>
                <div class="contact-form">
                    <div class="form-group" style="margin-bottom:15px;">
                        <label>è¯çµ¡äººå§“å</label>
                        <input type="text" id="user-name" class="form-control" placeholder="è«‹è¼¸å…¥æ‚¨çš„ç¨±å‘¼">
                    </div>
                    <div class="form-group" style="margin-bottom:20px;">
                        <label>æ‰‹æ©Ÿè™Ÿç¢¼</label>
                        <input type="tel" id="user-phone" class="form-control" placeholder="09xxxxxxxx" maxlength="10">
                        <div id="phone-error" class="error-msg">è«‹è¼¸å…¥æ­£ç¢ºçš„ 10 ç¢¼æ‰‹æ©Ÿè™Ÿç¢¼ (09é–‹é ­)</div>
                    </div>
                    
                    <button id="btn-submit" class="btn btn-line" style="width:100%; padding:15px; font-size:1.1rem;" onclick="sendToLine()">
                        <i class="fa-brands fa-line"></i> æ‰¾ç®¡å®¶è©¢å•å„ªæƒ åƒ¹
                    </button>
                    <p style="text-align:center; font-size:0.8rem; color:#888; margin-top:10px;">é»æ“Šå¾Œç³»çµ±å°‡è‡ªå‹•è¤‡è£½è³‡æ–™ä¸¦è·³è½‰ LINE</p>
                </div>
            </div>

        </div>

        <button class="calendar-toggle-btn" onclick="toggleCalendarVisibility()">
            <i class="fa-solid fa-eye"></i> é¡¯ç¤º/éš±è— è©³ç´°æ—¥æ›†
        </button>

        <div id="calendars-wrapper" class="calendars-area fade-in">
            <div class="calendar-card" id="cal-hello">
                <h3>ä½ å¥½å“‡å¯“æ‰€ <span style="font-size:0.8rem; background:#eee; padding:2px 8px; border-radius:4px; margin-left:10px; color:#555;">ä¸»é¤¨</span></h3>
                <div class="calendar-container">
                    <iframe src="https://calendar.google.com/calendar/embed?src=a77a451f0a645261b0202f6faf810082df31f92d20fe20c19cbb10945d9714f4%40group.calendar.google.com&ctz=Asia%2FTaipei" scrolling="no"></iframe>
                </div>
            </div>
            <div class="calendar-card hidden" id="cal-gouding">
                <h3>æºé ‚æ°‘å®¿ <span style="font-size:0.8rem; background:#795548; padding:2px 8px; border-radius:4px; color:#fff;">äºŒé¤¨</span></h3>
                <div class="calendar-container">
                    <iframe src="https://calendar.google.com/calendar/embed?src=56feb65c62285b41fe4c97af783991d9710832f223bf2a85919bb60c04be3603%40group.calendar.google.com&ctz=Asia%2FTaipei&color=%23795548" scrolling="no"></iframe>
                </div>
            </div>
        </div>

        <div style="height: 100px;"></div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <h3>é—œæ–¼ ä½ å¥½å“‡å¯“æ‰€</h3>
                    <div class="footer-desc">
                        <p>ã€Œä½ å¥½å“‡ãƒ»å¯“æ‰€ã€èˆ‡ã€Œæºé ‚æ°‘å®¿ã€ä½æ–¼é«˜é›„é¹½åŸ•å€ï¼Œå°ˆæ³¨æ–¼æä¾› 6~38äºº çš„å½ˆæ€§å¤§ç©ºé–“åŒ…æ£Ÿä½å®¿ã€‚</p>
                    </div>
                </div>
                <div>
                    <h3>è¯çµ¡è³‡è¨Š</h3>
                    <div class="contact-row"><i class="fa-solid fa-location-dot"></i> <a href="https://goo.gl/maps/qxGN4mpNP8qfRCB16" target="_blank">é«˜é›„å¸‚é¹½åŸ•å€å¤§å…¬è·¯70å··8è™Ÿ</a></div>
                    <div class="contact-row"><i class="fa-solid fa-phone"></i> <a href="tel:0932828922">0932-828-922</a></div>
                    <div class="contact-row"><i class="fa-brands fa-line"></i> <a href="https://lin.ee/atCiMQw" target="_blank">LINE ID: 0932828922</a></div>
                </div>
                <div>
                    <h3>ç†±é–€é—œéµå­—</h3>
                    <div class="seo-tags">
                        <span>é«˜é›„åŒ…æ£Ÿæ¨è–¦</span><span>é¹½åŸ•å€æ°‘å®¿</span><span>é§äºŒä½å®¿</span><span>éº»å°‡æ°‘å®¿</span><span>ä¸­å³¶å»šæˆ¿</span><span>è¦ªå­ä½å®¿</span><span>æ£§è²³åº«å‘¨é‚Š</span><span>KTVæ°‘å®¿</span><span>åˆæ³•æ°‘å®¿</span><span>å“¡å·¥æ—…éŠ</span>
                    </div>
                </div>
            </div>
            <div class="copyright">Â© 2025 ä½ å¥½å“‡å¯“æ‰€ Hello House. All Rights Reserved.</div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/zh-tw.js"></script>
    
    <script>
        // âš ï¸ è«‹ç¢ºèªæ­¤ GAS ç¶²å€å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆ
        const GAS_APP_URL = "https://script.google.com/macros/s/AKfycbxsFEJ9ubWMY9Y6xqBZ-3-KgSrYQnC9D3zwuKUL66HvKJdN5S1HTNeahhWlV6hcixbx0A/exec";
        const LINE_ADD_FRIEND_URL = "https://lin.ee/atCiMQw";

        let selectedStart = null;
        let selectedEnd = null;
        let currentSelectedPlan = null;

        // æˆ¿å‹è³‡æ–™ (å«å¹³æ—¥åƒ¹æ ¼)
        const ROOM_PLANS = {
            'hello': [
                { title: "3æˆ¿åŒ…æ£Ÿ (8äºº)", price: "å¹³æ—¥ $16,000 èµ·", capacity: "8äºº", detail: "é…ç½®ï¼š3æˆ¿ (2/2/4)" },
                { title: "4æˆ¿åŒ…æ£Ÿ (14äºº)", price: "å¹³æ—¥ $20,000 èµ·", capacity: "14äºº", detail: "é…ç½®ï¼š4æˆ¿ (2/2/4/6)" },
                { title: "5æˆ¿åŒ…æ£Ÿ (16äºº)", price: "å¹³æ—¥ $22,000 èµ·", capacity: "16äºº", detail: "é…ç½®ï¼š5æˆ¿ (2/2/2/4/6)" },
                { title: "5+1æˆ¿åŒ…æ£Ÿ (22äºº)", price: "å¹³æ—¥ $26,000 èµ·", capacity: "22äºº", detail: "é…ç½®ï¼š5+1æˆ¿ (2/2/2/4/6/6)" },
                { title: "5+1æˆ¿+åŠ åºŠ (26äºº)", price: "å¹³æ—¥ $30,000 èµ·", capacity: "26äºº", detail: "é…ç½®ï¼š2/2/2/4/6+2/6+2 (å…¨é–‹)" }
            ],
            'gouding': [
                { title: "3æˆ¿åŒ…æ£Ÿ (10äºº)", price: "å¹³æ—¥ $10,000 èµ·", capacity: "10äºº", detail: "é…ç½®ï¼š3æˆ¿ (2/4/4)" },
                { title: "4æˆ¿åŒ…æ£Ÿ (12äºº)", price: "å¹³æ—¥ $12,000 èµ·", capacity: "12äºº", detail: "é…ç½®ï¼š4æˆ¿ (2/4/4/2)" }
            ],
            'double': [
                { title: "é›™é¤¨é€£é€šå¤§åŒ…æ£Ÿ (27-38äºº)", price: "å¹³æ—¥ $42,000 èµ·", capacity: "27-38äºº", detail: "åŒ…å«ï¼šä½ å¥½å“‡(26äºº) + æºé ‚(12äºº)" }
            ]
        };

        const fp = flatpickr("#date-range", {
            mode: "range", locale: "zh_tw", dateFormat: "Y-m-d", minDate: "today",
            onClose: function(dates) { if (dates.length === 2) { selectedStart = dates[0]; selectedEnd = dates[1]; } }
        });

        document.addEventListener('DOMContentLoaded', () => { 
            updateVenueOptions(); 
            
            // Navbar Logic
            const mobileMenu = document.getElementById('mobile-menu');
            const navMenu = document.querySelector('.nav-menu');
            mobileMenu.addEventListener('click', () => {
                mobileMenu.classList.toggle('is-active');
                navMenu.classList.toggle('active');
            });

            document.querySelectorAll('.dropdown').forEach(dropdown => {
                const toggle = dropdown.querySelector('.dropdown-toggle');
                if(toggle) {
                    toggle.addEventListener('click', (e) => {
                        if (window.innerWidth <= 960) {
                            const href = toggle.getAttribute('href');
                            if (href && href !== '#' && href !== 'javascript:void(0)') { return; }
                            e.preventDefault();
                            dropdown.classList.toggle('active');
                        }
                    });
                }
            });
        });

        function updateVenueOptions() {
            const range = document.getElementById('guest-range').value;
            const select = document.getElementById('venue-select');
            select.innerHTML = '';
            if (range === 'small') {
                select.add(new Option('ä½ å¥½å“‡å¯“æ‰€ (6-26äºº)', 'hello'));
                select.add(new Option('æºé ‚æ°‘å®¿ (6-12äºº)', 'gouding'));
            } else if (range === 'medium') {
                select.add(new Option('ä½ å¥½å“‡å¯“æ‰€ (6-26äºº)', 'hello'));
            } else if (range === 'large') {
                select.add(new Option('é›™åŒ…æ£Ÿ (ä½ å¥½å“‡+æºé ‚)', 'double'));
            }
            handleVenueChange();
        }

        function handleVenueChange() {
            const venue = document.getElementById('venue-select').value;
            const wrapper = document.getElementById('calendars-wrapper');
            const calHello = document.getElementById('cal-hello');
            const calGouding = document.getElementById('cal-gouding');

            calHello.classList.add('hidden');
            calGouding.classList.add('hidden');
            wrapper.classList.remove('dual-view');

            if (venue === 'hello') calHello.classList.remove('hidden');
            else if (venue === 'gouding') calGouding.classList.remove('hidden');
            else if (venue === 'double') {
                calHello.classList.remove('hidden');
                calGouding.classList.remove('hidden');
                wrapper.classList.add('dual-view');
            }
        }

        function showStatus(type, htmlContent) {
            const box = document.getElementById('status-box');
            box.style.display = 'block';
            box.className = `status-message status-${type}`;
            box.innerHTML = htmlContent;
        }

        function startQuery() {
            document.getElementById('step-2-plan').classList.remove('active');
            document.getElementById('step-3-contact').classList.remove('active');
            currentSelectedPlan = null;

            if (!selectedStart || !selectedEnd) { alert("è«‹å…ˆé¸æ“‡å…¥ä½èˆ‡é€€æˆ¿æ—¥æœŸ"); fp.open(); return; }

            const venueVal = document.getElementById('venue-select').value;
            const venueText = document.getElementById('venue-select').options[document.getElementById('venue-select').selectedIndex].text;

            showStatus('loading', '<i class="fa-solid fa-spinner fa-spin"></i> æ­£åœ¨é€£ç·šç¢ºèªå³æ™‚æª”æœŸ...');

            const url = `${GAS_APP_URL}?start=${formatDate(selectedStart)}&end=${formatDate(selectedEnd)}&venue=${venueVal}`;

            fetch(url).then(r => r.json()).then(data => {
                if (data.available) {
                    let html = `<h3 style="color:#2F855A; margin:0;"><i class="fa-solid fa-circle-check"></i> æœ‰ç©ºæˆ¿</h3>`;
                    html += `<p style="margin:5px 0 0 0;">${venueText} æ­¤æ™‚æ®µå¯é è¨‚ï¼Œè«‹ç¹¼çºŒé¸æ“‡æ–¹æ¡ˆã€‚</p>`;
                    showStatus('success', html);
                    renderRoomOptions(venueVal);
                } else {
                    let html = `<h3 style="color:#C53030; margin:0;"><i class="fa-solid fa-circle-xmark"></i> æ²’æœ‰ç©ºæˆ¿</h3>`;
                    html += `<p style="margin:5px 0;">å¾ˆæŠ±æ­‰ï¼Œ<strong>${venueText}</strong> åœ¨æ‚¨é¸æ“‡çš„æœŸé–“å…§å·²æœ‰é è¨‚ã€‚</p>`;

                    if (data.daily_status && data.daily_status.length > 0) {
                        html += `<div style="background:#fff; border:1px solid #eee; border-radius:8px; padding:10px; margin-top:10px; font-size:0.85rem;">`;
                        html += `<div style="font-weight:bold; margin-bottom:5px; color:#555;">æœŸé–“æˆ¿æ³æ˜ç´°ï¼š</div>`;
                        html += `<div style="display:flex; flex-wrap:wrap; gap:5px; justify-content:center;">`;
                        data.daily_status.forEach(day => {
                            const statusColor = day.free ? '#28a745' : '#dc3545';
                            const statusIcon = day.free ? 'â­•' : 'âŒ';
                            html += `<span style="border:1px solid ${statusColor}; color:${statusColor}; padding:2px 6px; border-radius:4px;">${day.date.slice(5)} ${statusIcon}</span>`;
                        });
                        html += `</div></div>`;
                    }

                    if (data.suggestions && data.suggestions.length > 0) {
                        html += `<div class="recommendation-area">`;
                        html += `<div class="rec-title"><i class="fa-solid fa-calendar-check"></i> ç‚ºæ‚¨æ¨è–¦è·Ÿä½ é¸æ“‡æ—¥æœŸç›¸è¿‘å¯é è¨‚æª”æœŸåƒè€ƒï¼š</div>`;
                        html += `<ul class="suggestion-list">`;
                        
                        data.suggestions.forEach(s => {
                            let tagClass = 'tag-hot'; 
                            let icon = 'fa-calendar-day';
                            if (s.tag === 'part') { tagClass = 'tag-part'; icon = 'fa-scissors'; }
                            else if (s.tag === 'week') { tagClass = 'tag-week'; }
                            
                            html += `<li class="suggestion-item" onclick="applyDate('${s.start}', '${s.end}')">`;
                            html += `<div style="display:flex; align-items:center;">`;
                            html += `<span class="sugg-tag ${tagClass}"><i class="fa-solid ${icon}"></i> ${s.label}</span>`;
                            html += `<span class="sugg-date">${s.start} ~ ${s.end}</span>`;
                            html += `</div>`;
                            html += `<span class="sugg-action">é¸æ“‡ <i class="fa-solid fa-angle-right"></i></span></li>`;
                        });
                        html += `</ul></div>`;
                    }
                    showStatus('error', html);
                }
            }).catch(e => {
                console.error(e);
                showStatus('error', 'é€£ç·šå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚');
            });
        }

        function renderRoomOptions(venue) {
            const container = document.getElementById('plan-container');
            container.innerHTML = '';
            const plans = ROOM_PLANS[venue] || [];
            plans.forEach((plan) => {
                const div = document.createElement('div');
                div.className = 'plan-card';
                div.innerHTML = `
                    <span class="plan-capacity">${plan.capacity}</span>
                    <h4>${plan.title}</h4>
                    <div class="plan-price">${plan.price}</div>
                    <p class="plan-desc">${plan.detail}</p>
                    <div class="select-hint">é»æ“Šé¸æ“‡æ­¤æ–¹æ¡ˆ</div>
                `;
                div.onclick = () => selectPlan(div, plan.title);
                container.appendChild(div);
            });
            const section = document.getElementById('step-2-plan');
            section.classList.add('active');
            section.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function selectPlan(cardDiv, planName) {
            document.querySelectorAll('.plan-card').forEach(el => el.classList.remove('selected'));
            cardDiv.classList.add('selected');
            currentSelectedPlan = planName;
            const step3 = document.getElementById('step-3-contact');
            if (!step3.classList.contains('active')) {
                step3.classList.add('active');
                setTimeout(() => step3.scrollIntoView({ behavior: 'smooth', block: 'start' }), 200);
            }
        }

        function sendToLine() {
            const nameInput = document.getElementById('user-name');
            const phoneInput = document.getElementById('user-phone');
            const errorMsg = document.getElementById('phone-error');
            const name = nameInput.value.trim();
            const phone = phoneInput.value.trim();
            const phoneRegex = /^09\d{8}$/;

            phoneInput.classList.remove('input-error');
            errorMsg.style.display = 'none';

            if (!name) { alert("è«‹è¼¸å…¥è¯çµ¡äººå§“å"); nameInput.focus(); return; }
            if (!phoneRegex.test(phone)) {
                phoneInput.classList.add('input-error');
                errorMsg.style.display = 'block';
                phoneInput.focus();
                return;
            }

            const venueText = document.getElementById('venue-select').options[document.getElementById('venue-select').selectedIndex].text;
            const message = `ä½ å¥½ï¼æˆ‘æƒ³é ç´„è¨‚æˆ¿ ğŸ \n--------------------------\nğŸ“… å…¥ä½ï¼š${formatDate(selectedStart)}\nğŸ“… é€€æˆ¿ï¼š${formatDate(selectedEnd)}\nğŸ¨ é¤¨åˆ¥ï¼š${venueText}\nğŸ›ï¸ æ–¹æ¡ˆï¼š${currentSelectedPlan}\n--------------------------\nğŸ‘¤ å§“åï¼š${name}\nğŸ“± é›»è©±ï¼š${phone}\n--------------------------\nè«‹å•æ˜¯å¦å¯ä»¥é è¨‚ï¼Ÿè¬è¬ï¼`;

            if (confirm("å³å°‡è·³è½‰è‡³ LINE å®˜æ–¹å¸³è™Ÿã€‚\n\nâš ï¸ ç³»çµ±å·²è‡ªå‹•è¤‡è£½è¨‚æˆ¿è³‡è¨Šï¼Œè«‹åœ¨ LINE å°è©±æ¡†ã€Œé•·æŒ‰è²¼ä¸Šã€å³å¯ï¼")) {
                navigator.clipboard.writeText(message).then(() => {
                    window.open(LINE_ADD_FRIEND_URL, "_blank");
                }).catch(() => {
                    alert("ç€è¦½å™¨é˜»æ“‹è‡ªå‹•è¤‡è£½ï¼Œè«‹æ‰‹å‹•è¤‡è£½ï¼š\n\n" + message);
                    window.open(LINE_ADD_FRIEND_URL, "_blank");
                });
            }
        }

        function formatDate(d) {
            return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
        }
        function applyDate(s, e) {
            fp.setDate([s, e]);
            selectedStart = new Date(s);
            selectedEnd = new Date(e);
            startQuery(); 
        }
        function toggleCalendarVisibility() {
            const wrapper = document.getElementById('calendars-wrapper');
            wrapper.classList.toggle('show');
            if(wrapper.classList.contains('show')) wrapper.scrollIntoView({behavior: "smooth", block: "start"});
        }
    </script>
</body>
</html>