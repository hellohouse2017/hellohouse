<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>è‡ªåŠ©å…¥ä½ç™»è¨˜ | ä½ å¥½å“‡å¯“æ‰€</title>
    <meta name="robots" content="noindex, nofollow"> 

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

    <style>
        /* è¨­è¨ˆç³»çµ± */
        :root {
            --c-dark: #2C3E50; --c-gold: #BFA15F; --c-gold-light: #F9F5EB; 
            --c-red: #A94442; --c-gray: #7F8C8D; --c-white: #FFFFFF;
            --font-serif: 'Noto Serif TC', serif; --font-sans: 'Noto Sans TC', sans-serif; 
            --shadow-card: 0 10px 30px rgba(0, 0, 0, 0.06);
        }

        *, *::before, *::after { box-sizing: border-box; }
        
        body { margin: 0; font-family: var(--font-sans); background-color: #F5F5F5; color: var(--c-dark); line-height: 1.7; display: flex; flex-direction: column; min-height: 100vh; overflow-x: hidden; }

        .navbar { background: var(--c-dark); height: 60px; display: flex; align-items: center; justify-content: center; position: fixed; top: 0; width: 100%; z-index: 999; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .nav-logo { color: var(--c-gold); font-family: var(--font-serif); font-size: 1.2rem; font-weight: 600; letter-spacing: 2px; text-decoration: none; }

        .header-section { margin-top: 60px; padding: 40px 20px; text-align: center; background: var(--c-dark); color: white; }
        .header-section h1 { margin: 0; font-family: var(--font-serif); font-size: 1.8rem; letter-spacing: 3px; font-weight: 500; }
        .header-section p { margin: 5px 0 0; font-size: 0.8rem; color: var(--c-gold); text-transform: uppercase; letter-spacing: 2px; }

        .container { width: 95%; max-width: 800px; margin: -30px auto 40px; position: relative; z-index: 10; }

        #capture-area { background-color: var(--c-white); padding: 40px; border-radius: 4px; box-shadow: var(--shadow-card); border-top: 6px solid var(--c-gold); }

        .section-title { font-family: var(--font-serif); font-size: 1.2rem; color: var(--c-dark); margin: 30px 0 20px; padding-left: 15px; border-left: 4px solid var(--c-gold); display: flex; align-items: center; }
        
        /* è¡¨å–®æ¨£å¼ */
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .form-group { margin-bottom: 5px; }
        .col-full { grid-column: 1 / -1; }
        .form-label { display: block; font-size: 0.85rem; color: var(--c-gray); margin-bottom: 5px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        .form-input { width: 100%; padding: 12px; font-size: 1rem; border: 1px solid #DDD; border-radius: 4px; background: #FAFAFA; transition: 0.3s; }
        .form-input:focus { outline: none; border-color: var(--c-gold); background: #FFF; box-shadow: 0 0 0 3px rgba(191, 161, 95, 0.1); }

        /* é¤¨åˆ¥æŒ‰éˆ• */
        .house-selector { display: flex; gap: 15px; }
        .house-btn { flex: 1; padding: 12px; border: 1px solid #DDD; border-radius: 6px; background: #FAFAFA; cursor: pointer; transition: 0.3s; text-align: center; position: relative; }
        .house-btn h4 { margin: 0; font-size: 1rem; color: var(--c-dark); font-weight: bold; }
        .house-btn:hover { background: #F0F0F0; }
        .house-btn.active { border: 2px solid var(--c-gold); background: var(--c-gold-light); box-shadow: 0 4px 10px rgba(191, 161, 95, 0.2); }
        .house-btn.active::after { content: '\f00c'; font-family: "Font Awesome 6 Free"; font-weight: 900; position: absolute; top: -10px; right: -5px; background: var(--c-gold); color: white; width: 24px; height: 24px; border-radius: 50%; font-size: 0.8rem; display: flex; align-items: center; justify-content: center; }

        /* ID ä¸Šå‚³å€å¡Š */
        .id-upload-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .id-box { 
            border: 2px dashed #BDC3C7; background: #FAFAFA; border-radius: 8px; 
            height: 200px; display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; position: relative; overflow: hidden; transition: 0.3s;
        }
        .id-box:hover { border-color: var(--c-gold); background: #FFFCF5; }
        .id-box i { font-size: 2rem; color: #BDC3C7; margin-bottom: 10px; }
        .id-box span { font-size: 0.9rem; color: #999; font-weight: bold; }
        .id-preview { width: 100%; height: 100%; object-fit: contain; display: none; position: absolute; top: 0; left: 0; background: #fff; }
        .id-watermark-hint { position: absolute; bottom: 0; width: 100%; background: rgba(0,0,0,0.6); color: white; font-size: 0.7rem; text-align: center; padding: 2px 0; display: none; }

        .info-box { background: #EBF8FF; border: 1px solid #BEE3F8; padding: 15px; border-radius: 6px; margin-bottom: 20px; font-size: 0.9rem; color: #2C5282; line-height: 1.6; }
        .info-box strong { color: #2B6CB0; }

        .checkbox-wrapper { display: flex; align-items: flex-start; margin-top: 20px; gap: 10px; font-size: 0.95rem; cursor: pointer; }
        .checkbox-wrapper input { margin-top: 5px; transform: scale(1.2); accent-color: var(--c-gold); }

        .action-area { text-align: center; margin-top: 40px; }
        .btn-submit { background-color: var(--c-dark); color: var(--c-gold); border: 1px solid var(--c-dark); padding: 18px 60px; font-size: 1.1rem; font-weight: bold; letter-spacing: 1px; border-radius: 50px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(44, 62, 80, 0.2); display: inline-flex; align-items: center; gap: 10px; }
        .btn-submit:hover { background-color: var(--c-gold); color: white; border-color: var(--c-gold); transform: translateY(-3px); }
        .btn-submit:disabled { background-color: #BDC3C7; border-color: #BDC3C7; cursor: not-allowed; }

        .footer { text-align: center; color: #999; font-size: 0.8rem; padding: 40px 0; margin-top: auto; }
        .highlight-error { animation: shake 0.5s; border-color: var(--c-red) !important; background-color: #FDEDEC !important; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        /* æ‰‹æ©Ÿç‰ˆ RWD */
        @media (max-width: 768px) {
            #capture-area { padding: 30px 20px; }
            .form-grid, .id-upload-grid { grid-template-columns: 1fr; }
            .col-full { grid-column: span 1; }
            .house-selector { flex-direction: column; }
            .header-section h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <nav class="navbar"><a href="#" class="nav-logo">ä½ å¥½å“‡å¯“æ‰€ | æºé ‚æ°‘å®¿</a></nav>
    <div class="header-section"><h1>è‡ªåŠ©å…¥ä½ç™»è¨˜</h1><p>Self Check-in Registration</p></div>

    <div class="container">
        <div id="capture-area">
            <div style="text-align:center; margin-bottom:30px; border-bottom:2px solid #EEE; padding-bottom:20px;">
                <h2 style="margin:0; color:var(--c-dark); font-family:var(--font-serif);">å…¥ä½èº«åˆ†ç™»è¨˜</h2>
                <span style="color:var(--c-gray); font-size:0.9rem;">Identity Verification</span>
            </div>

            <div class="info-box">
                <i class="fa-solid fa-shield-halved"></i> <strong>å€‹è³‡å®‰å…¨è²æ˜ï¼š</strong><br>
                ä¾è§€å…‰å±€è¦å®šï¼Œæ—…å®¢å…¥ä½éœ€ç™»è¨˜èº«åˆ†ã€‚æœ¬ç³»çµ±æ¡ç”¨åŠ å¯†å‚³è¼¸ï¼Œæ‚¨çš„è­‰ä»¶ç…§ç‰‡å°‡è‡ªå‹•å£“ä¸Šã€Œåƒ…ä¾›æ°‘å®¿ç™»è¨˜å…¥ä½ä½¿ç”¨ã€æµ®æ°´å°ï¼Œä¸¦ä¸ä½œä»–ç”¨ï¼Œè«‹å®‰å¿ƒä¸Šå‚³ã€‚
            </div>

            <div class="form-grid">
                <div class="form-group col-full">
                    <label class="form-label">å…¥ä½é¤¨åˆ¥ (Select House)</label>
                    <input type="hidden" id="house-select" value="ä½ å¥½å“‡å¯“æ‰€">
                    <div class="house-selector">
                        <div class="house-btn active" onclick="selectHouse('ä½ å¥½å“‡å¯“æ‰€', this)"><h4>ä½ å¥½å“‡å¯“æ‰€</h4></div>
                        <div class="house-btn" onclick="selectHouse('æºé ‚æ°‘å®¿', this)"><h4>æºé ‚æ°‘å®¿</h4></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">è¨‚æˆ¿äººå§“å (Name)</label>
                    <input type="text" id="booker-name" class="form-input" placeholder="è«‹è¼¸å…¥çœŸå¯¦å§“å">
                </div>
                <div class="form-group">
                    <label class="form-label">è¯çµ¡é›»è©± (Phone)</label>
                    <input type="tel" id="booker-phone" class="form-input" placeholder="09xxxxxxxx">
                </div>
            </div>

            <div class="section-title">ä¸Šå‚³èº«åˆ†è­‰ä»¶ (è‡ªå‹•åŠ æµ®æ°´å°)</div>
            <div class="id-upload-grid">
                <div class="id-box" onclick="document.getElementById('file-front').click()">
                    <i class="fa-regular fa-id-card"></i>
                    <span>é–‹å•Ÿç›¸æ©Ÿæ‹ã€æ­£é¢ã€‘</span>
                    <img id="preview-front" class="id-preview">
                    <div class="id-watermark-hint" id="hint-front">å·²åŠ ä¸Šå®‰å…¨æµ®æ°´å°</div>
                    <input type="file" id="file-front" accept="image/*" capture="environment" hidden onchange="handleIdUpload(this, 'preview-front', 'hint-front')">
                </div>
                <div class="id-box" onclick="document.getElementById('file-back').click()">
                    <i class="fa-solid fa-id-card"></i>
                    <span>é–‹å•Ÿç›¸æ©Ÿæ‹ã€åé¢ã€‘</span>
                    <img id="preview-back" class="id-preview">
                    <div class="id-watermark-hint" id="hint-back">å·²åŠ ä¸Šå®‰å…¨æµ®æ°´å°</div>
                    <input type="file" id="file-back" accept="image/*" capture="environment" hidden onchange="handleIdUpload(this, 'preview-back', 'hint-back')">
                </div>
            </div>

            <label class="checkbox-wrapper">
                <input type="checkbox" id="agree-check">
                <span>æˆ‘ç¢ºèªä¸Šè¿°è¨‚æˆ¿äººå§“åèˆ‡è­‰ä»¶ç›¸ç¬¦ï¼Œä¸¦åŒæ„è¾¦ç†è‡ªåŠ©å…¥ä½æ‰‹çºŒã€‚</span>
            </label>
        </div>

        <div class="action-area">
            <button id="btn-submit" class="btn-submit" onclick="submitForm()">
                <span id="btn-text">ç¢ºèªè³‡æ–™ä¸¦ä¸Šå‚³</span>
                <i class="fa-solid fa-cloud-arrow-up"></i>
            </button>
            <p style="font-size:0.8rem; color:#999; margin-top:15px;">ç³»çµ±å°‡è‡ªå‹•ç”ŸæˆåŠ å¯† PDF å‚³é€çµ¦ç®¡å®¶</p>
        </div>
    </div>

    <footer class="footer">Â© 2025 ä½ å¥½å“‡å¯“æ‰€ & æºé ‚æ°‘å®¿. All Rights Reserved.</footer>

    <canvas id="watermark-canvas" style="display:none;"></canvas>

    <script>
        const GAS_APP_URL = "https://script.google.com/macros/s/AKfycbzfqpbILo5s6P0593PcdpYVie5cbyYGhxe83-Xbzs5QHymN6uNwo37ziT0As6zj1tZk1w/exec";
        const MY_LIFF_ID = "2008582194-vLLGoM4M"; 

        const { jsPDF } = window.jspdf;

        document.addEventListener('DOMContentLoaded', function() {
            if (typeof liff !== 'undefined') { liff.init({ liffId: MY_LIFF_ID }).catch(err => console.error(err)); }
        });

        function selectHouse(value, element) {
            document.getElementById('house-select').value = value;
            document.querySelectorAll('.house-btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
        }

        function handleIdUpload(input, previewId, hintId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.getElementById('watermark-canvas');
                        const ctx = canvas.getContext('2d');
                        
                        // ç¸®æ”¾ä»¥æ§åˆ¶è¨˜æ†¶é«”
                        const maxWidth = 800;
                        const scale = maxWidth / img.width;
                        canvas.width = maxWidth;
                        canvas.height = img.height * scale;

                        // ç¹ªè£½åŸåœ–
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                        // æµ®æ°´å°
                        const houseName = document.getElementById('house-select').value;
                        const text = `åƒ…ä¾› ${houseName} ç™»è¨˜å…¥ä½ä½¿ç”¨`;
                        
                        ctx.font = "bold 24px Arial";
                        ctx.fillStyle = "rgba(255, 255, 255, 0.5)";
                        ctx.textAlign = "center";
                        ctx.textBaseline = "middle";
                        
                        ctx.save();
                        ctx.translate(canvas.width/2, canvas.height/2);
                        ctx.rotate(-Math.PI / 6);
                        
                        ctx.fillText(text, 0, -100);
                        ctx.fillStyle = "rgba(255, 0, 0, 0.4)";
                        ctx.fillText(text, 0, 0);
                        ctx.fillStyle = "rgba(255, 255, 255, 0.5)";
                        ctx.fillText(text, 0, 100);
                        
                        ctx.restore();

                        const processedData = canvas.toDataURL('image/jpeg', 0.8);
                        const preview = document.getElementById(previewId);
                        preview.src = processedData;
                        preview.style.display = 'block';
                        document.getElementById(hintId).style.display = 'block';
                    }
                    img.src = e.target.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        async function submitForm() {
            const name = document.getElementById('booker-name').value.trim();
            const phone = document.getElementById('booker-phone').value.trim();
            const house = document.getElementById('house-select').value;
            const agree = document.getElementById('agree-check').checked;
            
            const hasFront = document.getElementById('preview-front').src.includes('base64');
            const hasBack = document.getElementById('preview-back').src.includes('base64');

            if (!name) return alertAndFocus("è«‹è¼¸å…¥è¨‚æˆ¿äººå§“å", "booker-name");
            if (!phone) return alertAndFocus("è«‹è¼¸å…¥è¯çµ¡é›»è©±", "booker-phone");
            if (!hasFront || !hasBack) return alertAndFocus("è«‹ä¸Šå‚³èº«åˆ†è­‰æ­£åé¢ç…§ç‰‡", "capture-area");
            if (!agree) return alertAndFocus("è«‹å‹¾é¸ç¢ºèªè³‡æ–™ç›¸ç¬¦", "agree-check");

            const confirmResult = await Swal.fire({
                title: 'è³‡æ–™ç¢ºèª',
                html: `æ‚¨è¼¸å…¥çš„å§“åæ˜¯ï¼š<strong style="color:#C5A065">${name}</strong><br>è«‹å•æ˜¯å¦èˆ‡è­‰ä»¶ç›¸ç¬¦ï¼Ÿ`,
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'æ˜¯çš„ï¼Œç¢ºèªé€å‡º',
                cancelButtonText: 'è¿”å›ä¿®æ”¹',
                confirmButtonColor: '#2C3E50'
            });

            if (!confirmResult.isConfirmed) return;

            const btn = document.getElementById('btn-submit');
            const btnText = document.getElementById('btn-text');
            btn.disabled = true;
            btnText.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> è³‡æ–™åŠ å¯†è™•ç†ä¸­...';

            try {
                const today = new Date().toISOString().split('T')[0].replace(/-/g, '');
                const fileName = `${today}_${house}_${name}_è­‰ä»¶ç™»è¨˜.pdf`;
                
                // æ‰‹æ©Ÿç‰ˆä½¿ç”¨ä½ Scale é˜²æ­¢å´©æ½°
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);
                const scale = isMobile ? 1.5 : 2;

                const captureArea = document.getElementById("capture-area");
                const canvasData = await html2canvas(captureArea, { scale: scale, useCORS: true, backgroundColor: "#ffffff", logging: false });
                const imgData = canvasData.toDataURL('image/jpeg', 0.7);
                
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const imgProps = pdf.getImageProperties(imgData);
                const imgHeight = (imgProps.height * pdfWidth) / imgProps.width;
                
                if (imgHeight > pdf.internal.pageSize.getHeight()) {
                    const longPdf = new jsPDF('p', 'mm', [pdfWidth, imgHeight + 10]);
                    longPdf.addImage(imgData, 'JPEG', 0, 0, pdfWidth, imgHeight);
                    var pdfBase64 = longPdf.output('datauristring');
                } else {
                    pdf.addImage(imgData, 'JPEG', 0, 0, pdfWidth, imgHeight);
                    var pdfBase64 = pdf.output('datauristring');
                }

                btnText.innerHTML = '<i class="fa-solid fa-cloud-arrow-up fa-spin"></i> ä¸Šå‚³é›²ç«¯...';

                const response = await fetch(GAS_APP_URL, {
                    method: "POST",
                    redirect: "follow",
                    headers: { "Content-Type": "text/plain;charset=utf-8" },
                    body: JSON.stringify({ type: "UPLOAD_IMG", image: pdfBase64, filename: fileName, user: name })
                });

                const textResponse = await response.text();
                let result;
                try { result = JSON.parse(textResponse); } catch(e) { throw new Error("ä¼ºæœå™¨å›æ‡‰éŒ¯èª¤"); }

                if (result.status === "success") {
                    
                    if (liff.isInClient()) {
                        // å˜—è©¦å‚³é€ Flexï¼Œå¤±æ•—å‰‡é™ç´šç‚ºç´”æ–‡å­—
                        try {
                            const flexMessage = {
                                "type": "flex",
                                "altText": "âœ… è‡ªåŠ©å…¥ä½ç™»è¨˜å®Œæˆ",
                                "contents": {
                                    "type": "bubble",
                                    "size": "mega",
                                    "header": {
                                        "type": "box", "layout": "vertical", "backgroundColor": "#2C3E50", "paddingAll": "xl",
                                        "contents": [
                                            { "type": "text", "text": "âœ… ç™»è¨˜å®Œæˆ", "color": "#BFA15F", "weight": "bold", "size": "lg", "align": "center" },
                                            { "type": "text", "text": "CHECK-IN COMPLETED", "color": "#95A5A6", "size": "xxs", "align": "center", "margin": "xs", "letterSpacing": "1px" }
                                        ]
                                    },
                                    "body": {
                                        "type": "box", "layout": "vertical", "paddingAll": "xl",
                                        "contents": [
                                            { "type": "text", "text": `æ­¡è¿æ‚¨ï¼Œ${name}`, "weight": "bold", "size": "lg", "color": "#1A202C" },
                                            { "type": "text", "text": "è­‰ä»¶èˆ‡è³‡æ–™å·²åŠ å¯†ä¸Šå‚³æ­¸æª”ã€‚", "size": "sm", "color": "#7F8C8D", "margin": "sm" },
                                            { "type": "separator", "margin": "xl" },
                                            {
                                                "type": "box", "layout": "vertical", "margin": "xl", "spacing": "sm",
                                                "contents": [
                                                    { "type": "box", "layout": "baseline", "contents": [{ "type": "text", "text": "ğŸ  é¤¨åˆ¥", "color": "#95A5A6", "size": "sm", "flex": 2 }, { "type": "text", "text": house, "wrap": true, "color": "#2C3E50", "size": "sm", "flex": 5, "weight": "bold" }] },
                                                    { "type": "box", "layout": "baseline", "contents": [{ "type": "text", "text": "ğŸ“± é›»è©±", "color": "#95A5A6", "size": "sm", "flex": 2 }, { "type": "text", "text": phone, "color": "#2C3E50", "size": "sm", "flex": 5 }] }
                                                ]
                                            },
                                            { "type": "separator", "margin": "xl" },
                                            { "type": "text", "text": "ğŸ”’ æ‚¨çš„è³‡æ–™åƒ…ä¾›æ—…å®¿ç™»è¨˜ä½¿ç”¨", "size": "xxs", "color": "#BFA15F", "margin": "md", "wrap": true, "align": "center" }
                                        ]
                                    }
                                }
                            };
                            await liff.sendMessages([flexMessage]);
                        } catch (msgErr) {
                            // é™ç´šç´”æ–‡å­—
                            const textMsg = `âœ… è‡ªåŠ©å…¥ä½ç™»è¨˜å®Œæˆï¼\n\nğŸ“„ æ—…å®¢ï¼š${name}\nğŸ  é¤¨åˆ¥ï¼š${house}\n\nè³‡æ–™å·²åŠ å¯†æ­¸æª”ï¼Œè«‹ç­‰å¾…ç®¡å®¶ç™¼é€å…¥ä½å¯†ç¢¼ã€‚`;
                            await liff.sendMessages([{ type: "text", text: textMsg }]);
                        }

                        await Swal.fire({ icon: 'success', title: 'ç™»è¨˜æˆåŠŸ', text: 'è«‹è¿”å› LINE æŸ¥çœ‹å…¥ä½è³‡è¨Š', confirmButtonColor: '#2C3E50', timer: 3000, timerProgressBar: true });
                        liff.closeWindow();
                        
                    } else {
                        Swal.fire({ icon: 'success', title: 'ç™»è¨˜æˆåŠŸï¼', text: 'æª”æ¡ˆå·²ä¸Šå‚³è‡³é›²ç«¯ã€‚', confirmButtonColor: '#2C3E50' });
                    }
                } else { throw new Error(result.msg || "ä¸Šå‚³å¤±æ•—"); }

            } catch (err) {
                console.error(err);
                Swal.fire({ icon: 'error', title: 'ä¸Šå‚³å¤±æ•—', text: err.message, confirmButtonColor: '#d33' });
            } finally {
                btn.disabled = false;
                btnText.innerHTML = "ç¢ºèªè³‡æ–™ä¸¦ä¸Šå‚³";
            }
        }

        function alertAndFocus(msg, id) {
            Swal.fire({ icon: 'warning', title: 'è«‹æª¢æŸ¥è³‡æ–™', text: msg, confirmButtonColor: '#BFA15F' }).then(() => {
                const el = document.getElementById(id);
                if(el) { el.scrollIntoView({behavior: "smooth", block: "center"}); el.classList.add('highlight-error'); setTimeout(() => el.classList.remove('highlight-error'), 1500); }
            });
        }
    </script>
</body>
</html>